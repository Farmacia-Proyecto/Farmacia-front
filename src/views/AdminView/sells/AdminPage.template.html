<div class="app-container">
  <header class="top-bar">
    <div class="logo">
      <img src="../../../assets/Logo.png" alt="Farmaceutica S.A Logo" class="logo-img">
      <span>Farmaceutica S.A</span>
    </div>
    <div class="top-menu">
      <div class="dropdown">
        <button class="user-btn" @click="toggleDropdown"><i class="fas fa-user"></i> Admin</button>
        <ul v-if="isDropdownVisible" class="dropdown-menu">
          <li @click="showChangePasswordForm">Cambiar Contrase√±a</li>
        </ul>
      </div>
      <button class="logout-btn" @click="logOut"><i class="fas fa-sign-out-alt"></i> Logout</button>
    </div>
  </header>
  <aside class="sidebar">
    <nav class="menu">
      <ul>
        <li class="active"><i class="fa-solid fa-cart-shopping"></i>Vender</li>
        <li @click="viewStock"><i class="fas fa-box"></i> Stock</li>
        <li  @click="viewUsers"><i class="fas fa-users"></i> Users</li>
        <li><i class="fas fa-cogs"></i> Control Panel</li>
        <li><i class="fas fa-chart-bar"></i> Reports</li>
        <li @click="viewLaboratory"><i class="fas fa-tools"></i>Laboratorios</li>
        <li><i class="fas fa-cog"></i> Config</li>
      </ul>
    </nav>
  </aside>
  <div class="main-content">
    <div class="actions-container">
      <div class="search-container">
        <button @click="toggleSearchBar"><i class="fas fa-search"></i></button>
        <input type="text" class="search-bar" v-bind:class="{ active: isSearchBarVisible }" v-model="search"
          @keyup.enter="searchProduct" placeholder="Buscar producto..." />
      </div>
    </div>

    <div class="products-grid">
      <div v-for="product in paginatedProducts" :key="product.id" class="product-card">
        <img :src="newProduct.image" :alt="`Imagen de ${product.name}`" class="product-image" />
        <div class="product-info">
          <p class="product-name">{{ product.nameProduct }}</p>
          <p class="product-laboratory">{{ product.laboratory }}</p>
          <p class="product-description">
            {{ product.describeProduct }}
          </p>
          <p class="product-quantity">{{ product.quantity}}</p>
          <p class="product-expiration">
          {{ product.priceSell}}
          </p>
        </div>
        <button class="add-lot-btn" @click="openProductDetailsModal(product)">
          <i class="fas fa-plus-circle"></i> Agregar a factura
        </button>
      </div>
    </div>
    <div class="pagination">
      <button v-for="page in totalPages" :key="page" @click="goToPage(page)" :class="{'active': currentPage === page}">
        {{ page }}
      </button>
    </div>   
  </div>
</div>